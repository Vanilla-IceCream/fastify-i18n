"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const g=require("fastify-plugin"),r=require("node-polyglot"),f=e=>e&&typeof e=="object"&&"default"in e?e:{default:e},y=f(g),u=f(r),b=y.default(async(e,l)=>{e.decorate("fallbackLocale",l.fallbackLocale),e.addHook("preParsing",async(c,d)=>{const a=new u.default,t=c.headers["accept-language"],s=Object.entries(l.messages);for(let n=0;n<s.length;n++){const[o,i]=s[n];o===t&&(a.locale(o),a.extend(i))}Object.keys(l.messages).includes(t)||(a.locale(l.fallbackLocale),a.extend(l.messages[l.fallbackLocale])),c.i18n=a})},{fastify:"4.x",name:"fastify-i18n"}),p=(e,l)=>{e.addHook("preParsing",async(c,d)=>{const a=new u.default,t=c.headers["accept-language"],s=Object.entries(l);for(let n=0;n<s.length;n++){const[o,i]=s[n];o===t&&(a.locale(o),a.extend(i))}Object.keys(l).includes(t)||(a.locale(e.fallbackLocale),a.extend(l[e.fallbackLocale])),c.i18n_local&&a.extend(c.i18n_local.phrases),c.i18n_local=a})},_=(e,l={useScope:"local"})=>l.useScope==="global"?e.i18n:e.i18n_local;exports.default=b;exports.defineI18n=p;exports.useI18n=_;
