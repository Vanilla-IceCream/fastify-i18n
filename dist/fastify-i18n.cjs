"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const d=require("fastify-plugin"),g=require("node-polyglot"),f=d(async(e,a)=>{e.decorate("fallbackLocale",a.fallbackLocale),e.addHook("preParsing",async(c,i)=>{var t;const n=new g,s=((t=c.headers["accept-language"])==null?void 0:t.split(",")[0])||a.fallbackLocale,l=Object.keys(a.messages).find(o=>o.startsWith(s)||s.startsWith(o));n.locale(l),n.extend(a.messages[l]),c.i18n=n})},{fastify:"4.x",name:"fastify-i18n"}),p=(e,a)=>{e.addHook("preParsing",async(c,i)=>{var t;const n=new g,s=((t=c.headers["accept-language"])==null?void 0:t.split(",")[0])||e.fallbackLocale,l=Object.keys(a).find(o=>o.startsWith(s)||s.startsWith(o));n.locale(l),n.extend(a[l]),c._i18n_local&&n.extend(c._i18n_local.phrases),c._i18n_local=n})},y=(e,a={useScope:"local"})=>a.useScope==="global"?e.i18n:e._i18n_local;exports.default=f;exports.defineI18n=p;exports.useI18n=y;
