(function(a,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("fastify-plugin"),require("node-polyglot")):typeof define=="function"&&define.amd?define(["exports","fastify-plugin","node-polyglot"],o):(a=typeof globalThis<"u"?globalThis:a||self,o(a.FastifyI18n={},a.FastifyPlugin,a.NodePolyglot))})(this,function(a,o,r){"use strict";const u=e=>e&&typeof e=="object"&&"default"in e?e:{default:e},y=u(o),g=u(r),p=y.default(async(e,l)=>{e.decorate("fallbackLocale",l.fallbackLocale),e.addHook("preParsing",async(t,k)=>{const n=new g.default,s=t.headers["accept-language"],i=Object.entries(l.messages);for(let c=0;c<i.length;c++){const[f,d]=i[c];f===s&&(n.locale(f),n.extend(d))}Object.keys(l.messages).includes(s)||(n.locale(l.fallbackLocale),n.extend(l.messages[l.fallbackLocale])),t.i18n=n})},{fastify:"4.x",name:"fastify-i18n"}),b=(e,l)=>{e.addHook("preParsing",async(t,k)=>{const n=new g.default,s=t.headers["accept-language"],i=Object.entries(l);for(let c=0;c<i.length;c++){const[f,d]=i[c];f===s&&(n.locale(f),n.extend(d))}Object.keys(l).includes(s)||(n.locale(e.fallbackLocale),n.extend(l[e.fallbackLocale])),t.i18n_local&&n.extend(t.i18n_local.phrases),t.i18n_local=n})},_=(e,l={useScope:"local"})=>l.useScope==="global"?e.i18n:e.i18n_local;a.default=p,a.defineI18n=b,a.useI18n=_,Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
